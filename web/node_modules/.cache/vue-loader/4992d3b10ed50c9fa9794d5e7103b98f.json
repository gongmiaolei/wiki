{"remainingRequest":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-header.vue?vue&type=style&index=0&id=11d05cd2&lang=css","dependencies":[{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-header.vue","mtime":1614134929000},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/css-loader/dist/cjs.js","mtime":1678346314778},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1678346315341},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/postcss-loader/src/index.js","mtime":1678346315020},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js","mtime":1678346314360},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1678346314907}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgLmxvZ28gewogICAgd2lkdGg6IDEyMHB4OwogICAgaGVpZ2h0OiAzMXB4OwogICAgLypiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7Ki8KICAgIC8qbWFyZ2luOiAxNnB4IDI4cHggMTZweCAwOyovCiAgICBmbG9hdDogbGVmdDsKICAgIGNvbG9yOiB3aGl0ZTsKICAgIGZvbnQtc2l6ZTogMThweDsKICB9CiAgLmxvZ2luLW1lbnUgewogICAgZmxvYXQ6IHJpZ2h0OwogICAgY29sb3I6IHdoaXRlOwogICAgcGFkZGluZy1sZWZ0OiAxMHB4OwogIH0K"},{"version":3,"sources":["/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-header.vue"],"names":[],"mappings":";EAuIE,CAAC,CAAC,CAAC,CAAC,EAAE;IACJ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACxC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC5B,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACjB;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACV,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACpB","file":"/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-header.vue","sourceRoot":"","sourcesContent":["<template>\n  <a-layout-header class=\"header\">\n    <div class=\"logo\">甲蛙知识库</div>\n    <a-menu\n      theme=\"dark\"\n      mode=\"horizontal\"\n      :style=\"{ lineHeight: '64px' }\"\n    >\n      <a-menu-item key=\"/\">\n        <router-link to=\"/\">首页</router-link>\n      </a-menu-item>\n      <a-menu-item key=\"/admin/user\" :style=\"user.id? {} : {display:'none'}\">\n        <router-link to=\"/admin/user\">用户管理</router-link>\n      </a-menu-item>\n      <a-menu-item key=\"/admin/ebook\" :style=\"user.id? {} : {display:'none'}\">\n        <router-link to=\"/admin/ebook\">电子书管理</router-link>\n      </a-menu-item>\n      <a-menu-item key=\"/admin/category\" :style=\"user.id? {} : {display:'none'}\">\n        <router-link to=\"/admin/category\">分类管理</router-link>\n      </a-menu-item>\n      <a-menu-item key=\"/about\">\n        <router-link to=\"/about\">关于我们</router-link>\n      </a-menu-item>\n      <a-menu-item key=\"/aliyun\">\n        <router-link to=\"/aliyun\">阿里云优惠</router-link>\n      </a-menu-item>\n      <a-popconfirm\n        title=\"确认退出登录?\"\n        ok-text=\"是\"\n        cancel-text=\"否\"\n        @confirm=\"logout()\"\n      >\n        <a class=\"login-menu\" v-show=\"user.id\">\n          <span>退出登录</span>\n        </a>\n      </a-popconfirm>\n      <a class=\"login-menu\" v-show=\"user.id\">\n        <span>您好：{{user.name}}</span>\n      </a>\n      <a class=\"login-menu\" v-show=\"!user.id\" @click=\"showLoginModal\">\n        <span>登录</span>\n      </a>\n    </a-menu>\n\n    <a-modal\n      title=\"登录\"\n      v-model:visible=\"loginModalVisible\"\n      :confirm-loading=\"loginModalLoading\"\n      @ok=\"login\"\n    >\n      <a-form :model=\"loginUser\" :label-col=\"{ span: 6 }\" :wrapper-col=\"{ span: 18 }\">\n        <a-form-item label=\"登录名\">\n          <a-input v-model:value=\"loginUser.loginName\" />\n        </a-form-item>\n        <a-form-item label=\"密码\">\n          <a-input v-model:value=\"loginUser.password\" type=\"password\" />\n        </a-form-item>\n      </a-form>\n    </a-modal>\n  </a-layout-header>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, ref, computed } from 'vue';\n  import axios from 'axios';\n  import { message } from 'ant-design-vue';\n  import store from \"@/store\";\n\n  declare let hexMd5: any;\n  declare let KEY: any;\n\n  export default defineComponent({\n    name: 'the-header',\n    setup () {\n      // 登录后保存\n      const user = computed(() => store.state.user);\n\n      // 用来登录\n      const loginUser = ref({\n        loginName: \"test\",\n        password: \"test\"\n      });\n      const loginModalVisible = ref(false);\n      const loginModalLoading = ref(false);\n      const showLoginModal = () => {\n        loginModalVisible.value = true;\n      };\n\n      // 登录\n      const login = () => {\n        console.log(\"开始登录\");\n        loginModalLoading.value = true;\n        loginUser.value.password = hexMd5(loginUser.value.password + KEY);\n        axios.post('/user/login', loginUser.value).then((response) => {\n          loginModalLoading.value = false;\n          const data = response.data;\n          if (data.success) {\n            loginModalVisible.value = false;\n            message.success(\"登录成功！\");\n\n            store.commit(\"setUser\", data.content);\n          } else {\n            message.error(data.message);\n          }\n        });\n      };\n\n      // 退出登录\n      const logout = () => {\n        console.log(\"退出登录开始\");\n        axios.get('/user/logout/' + user.value.token).then((response) => {\n          const data = response.data;\n          if (data.success) {\n            message.success(\"退出登录成功！\");\n            store.commit(\"setUser\", {});\n          } else {\n            message.error(data.message);\n          }\n        });\n      };\n\n      return {\n        loginModalVisible,\n        loginModalLoading,\n        showLoginModal,\n        loginUser,\n        login,\n        user,\n        logout\n      }\n    }\n  });\n</script>\n\n<style>\n  .logo {\n    width: 120px;\n    height: 31px;\n    /*background: rgba(255, 255, 255, 0.2);*/\n    /*margin: 16px 28px 16px 0;*/\n    float: left;\n    color: white;\n    font-size: 18px;\n  }\n  .login-menu {\n    float: right;\n    color: white;\n    padding-left: 10px;\n  }\n</style>\n"]}]}