{"remainingRequest":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-footer.vue?vue&type=template&id=8ed72df2","dependencies":[{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-footer.vue","mtime":1678361297790},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1678346315366},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js","mtime":1678346314360},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1678346314907}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGEtbGF5b3V0LWZvb3RlciBzdHlsZT0idGV4dC1hbGlnbjogY2VudGVyIj4KICAgIOa3vOejiueUteWtkOS5pjxzcGFuIHYtc2hvdz0idXNlci5pZCI+77yM5qyi6L+O77yae3t1c2VyLm5hbWV9fTwvc3Bhbj4KICA8L2EtbGF5b3V0LWZvb3Rlcj4K"},{"version":3,"sources":["/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-footer.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACrD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-footer.vue","sourceRoot":"","sourcesContent":["<template>\n  <a-layout-footer style=\"text-align: center\">\n    淼磊电子书<span v-show=\"user.id\">，欢迎：{{user.name}}</span>\n  </a-layout-footer>\n</template>\n\n<script lang=\"ts\">\n  import { defineComponent, computed, onMounted } from 'vue';\n  import store from \"@/store\";\n  import {Tool} from \"@/util/tool\";\n  import { notification } from 'ant-design-vue';\n\n  export default defineComponent({\n    name: 'the-footer',\n    setup() {\n      const user = computed(() => store.state.user);\n\n      let websocket: any;\n      let token: any;\n      const onOpen = () => {\n        console.log('WebSocket连接成功，状态码：', websocket.readyState)\n      };\n      const onMessage = (event: any) => {\n        console.log('WebSocket收到消息：', event.data);\n        notification['info']({\n          message: '收到消息',\n          description: event.data,\n        });\n      };\n      const onError = () => {\n        console.log('WebSocket连接错误，状态码：', websocket.readyState)\n      };\n      const onClose = () => {\n        console.log('WebSocket连接关闭，状态码：', websocket.readyState)\n      };\n      const initWebSocket = () => {\n        // 连接成功\n        websocket.onopen = onOpen;\n        // 收到消息的回调\n        websocket.onmessage = onMessage;\n        // 连接错误\n        websocket.onerror = onError;\n        // 连接关闭的回调\n        websocket.onclose = onClose;\n      };\n\n      onMounted(() => {\n        // WebSocket\n        if ('WebSocket' in window) {\n          token = Tool.uuid(10);\n          // 连接地址：ws://127.0.0.1:8880/ws/xxx\n          websocket = new WebSocket(process.env.VUE_APP_WS_SERVER + '/ws/' + token);\n          initWebSocket()\n\n          // 关闭\n          // websocket.close();\n        } else {\n          alert('当前浏览器 不支持')\n        }\n      });\n\n      return {\n        user\n      }\n    }\n  });\n</script>\n"]}]}