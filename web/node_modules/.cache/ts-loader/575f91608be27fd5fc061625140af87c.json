{"remainingRequest":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/ts-loader/index.js??ref--13-1!/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-header.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-header.vue","mtime":1678361172488},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js","mtime":1678346314360},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/ts-loader/index.js","mtime":1678346315105},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js","mtime":1678346314360},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1678346314907}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCByZWYsIGNvbXB1dGVkIH0gZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgbWVzc2FnZSB9IGZyb20gJ2FudC1kZXNpZ24tdnVlJzsKaW1wb3J0IHN0b3JlIGZyb20gIkAvc3RvcmUiOwpleHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQoewogICAgbmFtZTogJ3RoZS1oZWFkZXInLAogICAgc2V0dXA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyDnmbvlvZXlkI7kv53lrZgKICAgICAgICB2YXIgdXNlciA9IGNvbXB1dGVkKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHN0b3JlLnN0YXRlLnVzZXI7IH0pOwogICAgICAgIC8vIOeUqOadpeeZu+W9lQogICAgICAgIHZhciBsb2dpblVzZXIgPSByZWYoewogICAgICAgICAgICBsb2dpbk5hbWU6ICJ0ZXN0IiwKICAgICAgICAgICAgcGFzc3dvcmQ6ICJ0ZXN0IgogICAgICAgIH0pOwogICAgICAgIHZhciBsb2dpbk1vZGFsVmlzaWJsZSA9IHJlZihmYWxzZSk7CiAgICAgICAgdmFyIGxvZ2luTW9kYWxMb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgICAgICB2YXIgc2hvd0xvZ2luTW9kYWwgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxvZ2luTW9kYWxWaXNpYmxlLnZhbHVlID0gdHJ1ZTsKICAgICAgICB9OwogICAgICAgIC8vIOeZu+W9lQogICAgICAgIHZhciBsb2dpbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIuW8gOWni+eZu+W9lSIpOwogICAgICAgICAgICBsb2dpbk1vZGFsTG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgIGxvZ2luVXNlci52YWx1ZS5wYXNzd29yZCA9IGhleE1kNShsb2dpblVzZXIudmFsdWUucGFzc3dvcmQgKyBLRVkpOwogICAgICAgICAgICBheGlvcy5wb3N0KCcvdXNlci9sb2dpbicsIGxvZ2luVXNlci52YWx1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGxvZ2luTW9kYWxMb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgbG9naW5Nb2RhbFZpc2libGUudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN1Y2Nlc3MoIueZu+W9leaIkOWKn++8gSIpOwogICAgICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgic2V0VXNlciIsIGRhdGEuY29udGVudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yKGRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgLy8g6YCA5Ye655m75b2VCiAgICAgICAgdmFyIGxvZ291dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIumAgOWHuueZu+W9leW8gOWniyIpOwogICAgICAgICAgICBheGlvcy5nZXQoJy91c2VyL2xvZ291dC8nICsgdXNlci52YWx1ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnN1Y2Nlc3MoIumAgOWHuueZu+W9leaIkOWKn++8gSIpOwogICAgICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgic2V0VXNlciIsIHt9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3IoZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBsb2dpbk1vZGFsVmlzaWJsZTogbG9naW5Nb2RhbFZpc2libGUsCiAgICAgICAgICAgIGxvZ2luTW9kYWxMb2FkaW5nOiBsb2dpbk1vZGFsTG9hZGluZywKICAgICAgICAgICAgc2hvd0xvZ2luTW9kYWw6IHNob3dMb2dpbk1vZGFsLAogICAgICAgICAgICBsb2dpblVzZXI6IGxvZ2luVXNlciwKICAgICAgICAgICAgbG9naW46IGxvZ2luLAogICAgICAgICAgICB1c2VyOiB1c2VyLAogICAgICAgICAgICBsb2dvdXQ6IGxvZ291dAogICAgICAgIH07CiAgICB9Cn0pOwo="},{"version":3,"file":"/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-header.vue.ts","sourceRoot":"","sources":["/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/gongmiaolei/Downloads/jiawawiki/web/src/components/the-header.vue?vue&type=script&lang=ts"],"names":[],"mappings":"AACE,OAAO,EAAE,eAAe,EAAE,GAAG,EAAE,QAAQ,EAAE,MAAM,KAAK,CAAC;AACrD,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,OAAO,EAAE,MAAM,gBAAgB,CAAC;AACzC,OAAO,KAAK,MAAM,SAAS,CAAC;AAK5B,eAAe,eAAe,CAAC;IAC7B,IAAI,EAAE,YAAY;IAClB,KAAK;QACH,QAAQ;QACR,IAAM,IAAI,GAAG,QAAQ,CAAC,cAAM,OAAA,KAAK,CAAC,KAAK,CAAC,IAAI,EAAhB,CAAgB,CAAC,CAAC;QAE9C,OAAO;QACP,IAAM,SAAS,GAAG,GAAG,CAAC;YACpB,SAAS,EAAE,MAAM;YACjB,QAAQ,EAAE,MAAM;SACjB,CAAC,CAAC;QACH,IAAM,iBAAiB,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;QACrC,IAAM,iBAAiB,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;QACrC,IAAM,cAAc,GAAG;YACrB,iBAAiB,CAAC,KAAK,GAAG,IAAI,CAAC;QACjC,CAAC,CAAC;QAEF,KAAK;QACL,IAAM,KAAK,GAAG;YACZ,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACpB,iBAAiB,CAAC,KAAK,GAAG,IAAI,CAAC;YAC/B,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC,CAAC;YAClE,KAAK,CAAC,IAAI,CAAC,aAAa,EAAE,SAAS,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;gBACvD,iBAAiB,CAAC,KAAK,GAAG,KAAK,CAAC;gBAChC,IAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;gBAC3B,IAAI,IAAI,CAAC,OAAO,EAAE;oBAChB,iBAAiB,CAAC,KAAK,GAAG,KAAK,CAAC;oBAChC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;oBAEzB,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;iBACvC;qBAAM;oBACL,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC7B;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,OAAO;QACP,IAAM,MAAM,GAAG;YACb,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACtB,KAAK,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;gBAC1D,IAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;gBAC3B,IAAI,IAAI,CAAC,OAAO,EAAE;oBAChB,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;oBAC3B,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;iBAC7B;qBAAM;oBACL,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC7B;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,OAAO;YACL,iBAAiB,mBAAA;YACjB,iBAAiB,mBAAA;YACjB,cAAc,gBAAA;YACd,SAAS,WAAA;YACT,KAAK,OAAA;YACL,IAAI,MAAA;YACJ,MAAM,QAAA;SACP,CAAA;IACH,CAAC;CACF,CAAC,CAAC","sourcesContent":["\n  import { defineComponent, ref, computed } from 'vue';\n  import axios from 'axios';\n  import { message } from 'ant-design-vue';\n  import store from \"@/store\";\n\n  declare let hexMd5: any;\n  declare let KEY: any;\n\n  export default defineComponent({\n    name: 'the-header',\n    setup () {\n      // 登录后保存\n      const user = computed(() => store.state.user);\n\n      // 用来登录\n      const loginUser = ref({\n        loginName: \"test\",\n        password: \"test\"\n      });\n      const loginModalVisible = ref(false);\n      const loginModalLoading = ref(false);\n      const showLoginModal = () => {\n        loginModalVisible.value = true;\n      };\n\n      // 登录\n      const login = () => {\n        console.log(\"开始登录\");\n        loginModalLoading.value = true;\n        loginUser.value.password = hexMd5(loginUser.value.password + KEY);\n        axios.post('/user/login', loginUser.value).then((response) => {\n          loginModalLoading.value = false;\n          const data = response.data;\n          if (data.success) {\n            loginModalVisible.value = false;\n            message.success(\"登录成功！\");\n\n            store.commit(\"setUser\", data.content);\n          } else {\n            message.error(data.message);\n          }\n        });\n      };\n\n      // 退出登录\n      const logout = () => {\n        console.log(\"退出登录开始\");\n        axios.get('/user/logout/' + user.value.token).then((response) => {\n          const data = response.data;\n          if (data.success) {\n            message.success(\"退出登录成功！\");\n            store.commit(\"setUser\", {});\n          } else {\n            message.error(data.message);\n          }\n        });\n      };\n\n      return {\n        loginModalVisible,\n        loginModalLoading,\n        showLoginModal,\n        loginUser,\n        login,\n        user,\n        logout\n      }\n    }\n  });\n"]}]}