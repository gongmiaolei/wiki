{"remainingRequest":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/thread-loader/dist/cjs.js!/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/ts-loader/index.js??ref--13-2!/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/gongmiaolei/Downloads/jiawawiki/web/src/views/admin/admin-category.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/src/views/admin/admin-category.vue","mtime":1614134929000},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js","mtime":1678346314360},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/thread-loader/dist/cjs.js","mtime":1678346314294},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/ts-loader/index.js","mtime":1678346315105},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js","mtime":1678346314360},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1678346314907}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBvbk1vdW50ZWQsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IG1lc3NhZ2UgfSBmcm9tICdhbnQtZGVzaWduLXZ1ZSc7CmltcG9ydCB7IFRvb2wgfSBmcm9tICJAL3V0aWwvdG9vbCI7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgICBuYW1lOiAnQWRtaW5DYXRlZ29yeScsCiAgICBzZXR1cDogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBwYXJhbSA9IHJlZigpOwogICAgICAgIHBhcmFtLnZhbHVlID0ge307CiAgICAgICAgdmFyIGNhdGVnb3J5cyA9IHJlZigpOwogICAgICAgIHZhciBsb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgICAgICB2YXIgY29sdW1ucyA9IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICflkI3np7AnLAogICAgICAgICAgICAgICAgZGF0YUluZGV4OiAnbmFtZScKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gewogICAgICAgICAgICAvLyAgIHRpdGxlOiAn54i25YiG57G7JywKICAgICAgICAgICAgLy8gICBrZXk6ICdwYXJlbnQnLAogICAgICAgICAgICAvLyAgIGRhdGFJbmRleDogJ3BhcmVudCcKICAgICAgICAgICAgLy8gfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICfpobrluo8nLAogICAgICAgICAgICAgICAgZGF0YUluZGV4OiAnc29ydCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICdBY3Rpb24nLAogICAgICAgICAgICAgICAga2V5OiAnYWN0aW9uJywKICAgICAgICAgICAgICAgIHNsb3RzOiB7IGN1c3RvbVJlbmRlcjogJ2FjdGlvbicgfQogICAgICAgICAgICB9CiAgICAgICAgXTsKICAgICAgICAvKioKICAgICAgICAgKiDkuIDnuqfliIbnsbvmoJHvvIxjaGlsZHJlbuWxnuaAp+WwseaYr+S6jOe6p+WIhuexuwogICAgICAgICAqIFt7CiAgICAgICAgICogICBpZDogIiIsCiAgICAgICAgICogICBuYW1lOiAiIiwKICAgICAgICAgKiAgIGNoaWxkcmVuOiBbewogICAgICAgICAqICAgICBpZDogIiIsCiAgICAgICAgICogICAgIG5hbWU6ICIiLAogICAgICAgICAqICAgfV0KICAgICAgICAgKiB9XQogICAgICAgICAqLwogICAgICAgIHZhciBsZXZlbDEgPSByZWYoKTsgLy8g5LiA57qn5YiG57G75qCR77yMY2hpbGRyZW7lsZ7mgKflsLHmmK/kuoznuqfliIbnsbsKICAgICAgICBsZXZlbDEudmFsdWUgPSBbXTsKICAgICAgICAvKioKICAgICAgICAgKiDmlbDmja7mn6Xor6IKICAgICAgICAgKiovCiAgICAgICAgdmFyIGhhbmRsZVF1ZXJ5ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBsb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgLy8g5aaC5p6c5LiN5riF56m6546w5pyJ5pWw5o2u77yM5YiZ57yW6L6R5L+d5a2Y6YeN5paw5Yqg6L295pWw5o2u5ZCO77yM5YaN54K557yW6L6R77yM5YiZ5YiX6KGo5pi+56S655qE6L+Y5piv57yW6L6R5YmN55qE5pWw5o2uCiAgICAgICAgICAgIGxldmVsMS52YWx1ZSA9IFtdOwogICAgICAgICAgICBheGlvcy5nZXQoIi9jYXRlZ29yeS9hbGwiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5cy52YWx1ZSA9IGRhdGEuY29udGVudDsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5Y6f5aeL5pWw57uE77yaIiwgY2F0ZWdvcnlzLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBsZXZlbDEudmFsdWUgPSBbXTsKICAgICAgICAgICAgICAgICAgICBsZXZlbDEudmFsdWUgPSBUb29sLmFycmF5MlRyZWUoY2F0ZWdvcnlzLnZhbHVlLCAwKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5qCR5b2i57uT5p6E77yaIiwgbGV2ZWwxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3IoZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICAvLyAtLS0tLS0tLSDooajljZUgLS0tLS0tLS0tCiAgICAgICAgdmFyIGNhdGVnb3J5ID0gcmVmKHt9KTsKICAgICAgICB2YXIgbW9kYWxWaXNpYmxlID0gcmVmKGZhbHNlKTsKICAgICAgICB2YXIgbW9kYWxMb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgICAgICB2YXIgaGFuZGxlTW9kYWxPayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbW9kYWxMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgYXhpb3MucG9zdCgiL2NhdGVnb3J5L3NhdmUiLCBjYXRlZ29yeS52YWx1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIG1vZGFsTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOyAvLyBkYXRhID0gY29tbW9uUmVzcAogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIG1vZGFsVmlzaWJsZS52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIC8vIOmHjeaWsOWKoOi9veWIl+ihqAogICAgICAgICAgICAgICAgICAgIGhhbmRsZVF1ZXJ5KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yKGRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgLyoqCiAgICAgICAgICog57yW6L6RCiAgICAgICAgICovCiAgICAgICAgdmFyIGVkaXQgPSBmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgICAgIG1vZGFsVmlzaWJsZS52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgIGNhdGVnb3J5LnZhbHVlID0gVG9vbC5jb3B5KHJlY29yZCk7CiAgICAgICAgfTsKICAgICAgICAvKioKICAgICAgICAgKiDmlrDlop4KICAgICAgICAgKi8KICAgICAgICB2YXIgYWRkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBtb2RhbFZpc2libGUudmFsdWUgPSB0cnVlOwogICAgICAgICAgICBjYXRlZ29yeS52YWx1ZSA9IHt9OwogICAgICAgIH07CiAgICAgICAgdmFyIGhhbmRsZURlbGV0ZSA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICBheGlvcy5kZWxldGUoIi9jYXRlZ29yeS9kZWxldGUvIiArIGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOyAvLyBkYXRhID0gY29tbW9uUmVzcAogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIC8vIOmHjeaWsOWKoOi9veWIl+ihqAogICAgICAgICAgICAgICAgICAgIGhhbmRsZVF1ZXJ5KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yKGRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgaGFuZGxlUXVlcnkoKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwYXJhbTogcGFyYW0sCiAgICAgICAgICAgIC8vIGNhdGVnb3J5cywKICAgICAgICAgICAgbGV2ZWwxOiBsZXZlbDEsCiAgICAgICAgICAgIGNvbHVtbnM6IGNvbHVtbnMsCiAgICAgICAgICAgIGxvYWRpbmc6IGxvYWRpbmcsCiAgICAgICAgICAgIGhhbmRsZVF1ZXJ5OiBoYW5kbGVRdWVyeSwKICAgICAgICAgICAgZWRpdDogZWRpdCwKICAgICAgICAgICAgYWRkOiBhZGQsCiAgICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSwKICAgICAgICAgICAgbW9kYWxWaXNpYmxlOiBtb2RhbFZpc2libGUsCiAgICAgICAgICAgIG1vZGFsTG9hZGluZzogbW9kYWxMb2FkaW5nLAogICAgICAgICAgICBoYW5kbGVNb2RhbE9rOiBoYW5kbGVNb2RhbE9rLAogICAgICAgICAgICBoYW5kbGVEZWxldGU6IGhhbmRsZURlbGV0ZQogICAgICAgIH07CiAgICB9Cn0pOwo="},{"version":3,"file":"/Users/gongmiaolei/Downloads/jiawawiki/web/src/views/admin/admin-category.vue.ts","sourceRoot":"","sources":["/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/gongmiaolei/Downloads/jiawawiki/web/src/views/admin/admin-category.vue?vue&type=script&lang=ts"],"names":[],"mappings":"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","sourcesContent":["\n  import { defineComponent, onMounted, ref } from 'vue';\n  import axios from 'axios';\n  import { message } from 'ant-design-vue';\n  import {Tool} from \"@/util/tool\";\n\n  export default defineComponent({\n    name: 'AdminCategory',\n    setup() {\n      const param = ref();\n      param.value = {};\n      const categorys = ref();\n      const loading = ref(false);\n\n      const columns = [\n        {\n          title: '名称',\n          dataIndex: 'name'\n        },\n        // {\n        //   title: '父分类',\n        //   key: 'parent',\n        //   dataIndex: 'parent'\n        // },\n        {\n          title: '顺序',\n          dataIndex: 'sort'\n        },\n        {\n          title: 'Action',\n          key: 'action',\n          slots: { customRender: 'action' }\n        }\n      ];\n\n      /**\n       * 一级分类树，children属性就是二级分类\n       * [{\n       *   id: \"\",\n       *   name: \"\",\n       *   children: [{\n       *     id: \"\",\n       *     name: \"\",\n       *   }]\n       * }]\n       */\n      const level1 = ref(); // 一级分类树，children属性就是二级分类\n      level1.value = [];\n\n      /**\n       * 数据查询\n       **/\n      const handleQuery = () => {\n        loading.value = true;\n        // 如果不清空现有数据，则编辑保存重新加载数据后，再点编辑，则列表显示的还是编辑前的数据\n        level1.value = [];\n        axios.get(\"/category/all\").then((response) => {\n          loading.value = false;\n          const data = response.data;\n          if (data.success) {\n            categorys.value = data.content;\n            console.log(\"原始数组：\", categorys.value);\n\n            level1.value = [];\n            level1.value = Tool.array2Tree(categorys.value, 0);\n            console.log(\"树形结构：\", level1);\n          } else {\n            message.error(data.message);\n          }\n        });\n      };\n\n      // -------- 表单 ---------\n      const category = ref({});\n      const modalVisible = ref(false);\n      const modalLoading = ref(false);\n      const handleModalOk = () => {\n        modalLoading.value = true;\n        axios.post(\"/category/save\", category.value).then((response) => {\n          modalLoading.value = false;\n          const data = response.data; // data = commonResp\n          if (data.success) {\n            modalVisible.value = false;\n\n            // 重新加载列表\n            handleQuery();\n          } else {\n            message.error(data.message);\n          }\n        });\n      };\n\n      /**\n       * 编辑\n       */\n      const edit = (record: any) => {\n        modalVisible.value = true;\n        category.value = Tool.copy(record);\n      };\n\n      /**\n       * 新增\n       */\n      const add = () => {\n        modalVisible.value = true;\n        category.value = {};\n      };\n\n      const handleDelete = (id: number) => {\n        axios.delete(\"/category/delete/\" + id).then((response) => {\n          const data = response.data; // data = commonResp\n          if (data.success) {\n            // 重新加载列表\n            handleQuery();\n          } else {\n            message.error(data.message);\n          }\n        });\n      };\n\n      onMounted(() => {\n        handleQuery();\n      });\n\n      return {\n        param,\n        // categorys,\n        level1,\n        columns,\n        loading,\n        handleQuery,\n\n        edit,\n        add,\n\n        category,\n        modalVisible,\n        modalLoading,\n        handleModalOk,\n\n        handleDelete\n      }\n    }\n  });\n"]}]}