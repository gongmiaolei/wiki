{"remainingRequest":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/thread-loader/dist/cjs.js!/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/ts-loader/index.js??ref--13-2!/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/gongmiaolei/Downloads/jiawawiki/web/src/views/admin/admin-ebook.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/src/views/admin/admin-ebook.vue","mtime":1614134929000},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js","mtime":1678346314360},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/thread-loader/dist/cjs.js","mtime":1678346314294},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/ts-loader/index.js","mtime":1678346315105},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js","mtime":1678346314360},{"path":"/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":1678346314907}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50LCBvbk1vdW50ZWQsIHJlZiB9IGZyb20gJ3Z1ZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IG1lc3NhZ2UgfSBmcm9tICdhbnQtZGVzaWduLXZ1ZSc7CmltcG9ydCB7IFRvb2wgfSBmcm9tICJAL3V0aWwvdG9vbCI7CmV4cG9ydCBkZWZhdWx0IGRlZmluZUNvbXBvbmVudCh7CiAgICBuYW1lOiAnQWRtaW5FYm9vaycsCiAgICBzZXR1cDogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBwYXJhbSA9IHJlZigpOwogICAgICAgIHBhcmFtLnZhbHVlID0ge307CiAgICAgICAgdmFyIGVib29rcyA9IHJlZigpOwogICAgICAgIHZhciBwYWdpbmF0aW9uID0gcmVmKHsKICAgICAgICAgICAgY3VycmVudDogMSwKICAgICAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgICAgICB0b3RhbDogMAogICAgICAgIH0pOwogICAgICAgIHZhciBsb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgICAgICB2YXIgY29sdW1ucyA9IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICflsIHpnaInLAogICAgICAgICAgICAgICAgZGF0YUluZGV4OiAnY292ZXInLAogICAgICAgICAgICAgICAgc2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnY292ZXInIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICflkI3np7AnLAogICAgICAgICAgICAgICAgZGF0YUluZGV4OiAnbmFtZScKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICfliIbnsbsnLAogICAgICAgICAgICAgICAgc2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnY2F0ZWdvcnknIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICfmlofmoaPmlbAnLAogICAgICAgICAgICAgICAgZGF0YUluZGV4OiAnZG9jQ291bnQnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAn6ZiF6K+75pWwJywKICAgICAgICAgICAgICAgIGRhdGFJbmRleDogJ3ZpZXdDb3VudCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICfngrnotZ7mlbAnLAogICAgICAgICAgICAgICAgZGF0YUluZGV4OiAndm90ZUNvdW50JwogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogJ0FjdGlvbicsCiAgICAgICAgICAgICAgICBrZXk6ICdhY3Rpb24nLAogICAgICAgICAgICAgICAgc2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnYWN0aW9uJyB9CiAgICAgICAgICAgIH0KICAgICAgICBdOwogICAgICAgIC8qKgogICAgICAgICAqIOaVsOaNruafpeivogogICAgICAgICAqKi8KICAgICAgICB2YXIgaGFuZGxlUXVlcnkgPSBmdW5jdGlvbiAocGFyYW1zKSB7CiAgICAgICAgICAgIGxvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICAgICAgICAvLyDlpoLmnpzkuI3muIXnqbrnjrDmnInmlbDmja7vvIzliJnnvJbovpHkv53lrZjph43mlrDliqDovb3mlbDmja7lkI7vvIzlho3ngrnnvJbovpHvvIzliJnliJfooajmmL7npLrnmoTov5jmmK/nvJbovpHliY3nmoTmlbDmja4KICAgICAgICAgICAgZWJvb2tzLnZhbHVlID0gW107CiAgICAgICAgICAgIGF4aW9zLmdldCgiL2Vib29rL2xpc3QiLCB7CiAgICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgICAgICBwYWdlOiBwYXJhbXMucGFnZSwKICAgICAgICAgICAgICAgICAgICBzaXplOiBwYXJhbXMuc2l6ZSwKICAgICAgICAgICAgICAgICAgICBuYW1lOiBwYXJhbS52YWx1ZS5uYW1lCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgZWJvb2tzLnZhbHVlID0gZGF0YS5jb250ZW50Lmxpc3Q7CiAgICAgICAgICAgICAgICAgICAgLy8g6YeN572u5YiG6aG15oyJ6ZKuCiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbi52YWx1ZS5jdXJyZW50ID0gcGFyYW1zLnBhZ2U7CiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbi52YWx1ZS50b3RhbCA9IGRhdGEuY29udGVudC50b3RhbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3IoZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICAvKioKICAgICAgICAgKiDooajmoLzngrnlh7vpobXnoIHml7bop6blj5EKICAgICAgICAgKi8KICAgICAgICB2YXIgaGFuZGxlVGFibGVDaGFuZ2UgPSBmdW5jdGlvbiAocGFnaW5hdGlvbikgewogICAgICAgICAgICBjb25zb2xlLmxvZygi55yL55yL6Ieq5bim55qE5YiG6aG15Y+C5pWw6YO95pyJ5ZWl77yaIiArIHBhZ2luYXRpb24pOwogICAgICAgICAgICBoYW5kbGVRdWVyeSh7CiAgICAgICAgICAgICAgICBwYWdlOiBwYWdpbmF0aW9uLmN1cnJlbnQsCiAgICAgICAgICAgICAgICBzaXplOiBwYWdpbmF0aW9uLnBhZ2VTaXplCiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgLy8gLS0tLS0tLS0g6KGo5Y2VIC0tLS0tLS0tLQogICAgICAgIC8qKgogICAgICAgICAqIOaVsOe7hO+8jFsxMDAsIDEwMV3lr7nlupTvvJrliY3nq6/lvIDlj5EgLyBWdWUKICAgICAgICAgKi8KICAgICAgICB2YXIgY2F0ZWdvcnlJZHMgPSByZWYoKTsKICAgICAgICB2YXIgZWJvb2sgPSByZWYoKTsKICAgICAgICB2YXIgbW9kYWxWaXNpYmxlID0gcmVmKGZhbHNlKTsKICAgICAgICB2YXIgbW9kYWxMb2FkaW5nID0gcmVmKGZhbHNlKTsKICAgICAgICB2YXIgaGFuZGxlTW9kYWxPayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbW9kYWxMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgZWJvb2sudmFsdWUuY2F0ZWdvcnkxSWQgPSBjYXRlZ29yeUlkcy52YWx1ZVswXTsKICAgICAgICAgICAgZWJvb2sudmFsdWUuY2F0ZWdvcnkySWQgPSBjYXRlZ29yeUlkcy52YWx1ZVsxXTsKICAgICAgICAgICAgYXhpb3MucG9zdCgiL2Vib29rL3NhdmUiLCBlYm9vay52YWx1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIG1vZGFsTG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOyAvLyBkYXRhID0gY29tbW9uUmVzcAogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIG1vZGFsVmlzaWJsZS52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIC8vIOmHjeaWsOWKoOi9veWIl+ihqAogICAgICAgICAgICAgICAgICAgIGhhbmRsZVF1ZXJ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogcGFnaW5hdGlvbi52YWx1ZS5jdXJyZW50LAogICAgICAgICAgICAgICAgICAgICAgICBzaXplOiBwYWdpbmF0aW9uLnZhbHVlLnBhZ2VTaXplLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5lcnJvcihkYXRhLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIC8qKgogICAgICAgICAqIOe8lui+kQogICAgICAgICAqLwogICAgICAgIHZhciBlZGl0ID0gZnVuY3Rpb24gKHJlY29yZCkgewogICAgICAgICAgICBtb2RhbFZpc2libGUudmFsdWUgPSB0cnVlOwogICAgICAgICAgICBlYm9vay52YWx1ZSA9IFRvb2wuY29weShyZWNvcmQpOwogICAgICAgICAgICBjYXRlZ29yeUlkcy52YWx1ZSA9IFtlYm9vay52YWx1ZS5jYXRlZ29yeTFJZCwgZWJvb2sudmFsdWUuY2F0ZWdvcnkySWRdOwogICAgICAgIH07CiAgICAgICAgLyoqCiAgICAgICAgICog5paw5aKeCiAgICAgICAgICovCiAgICAgICAgdmFyIGFkZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgbW9kYWxWaXNpYmxlLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgZWJvb2sudmFsdWUgPSB7fTsKICAgICAgICB9OwogICAgICAgIHZhciBoYW5kbGVEZWxldGUgPSBmdW5jdGlvbiAoaWQpIHsKICAgICAgICAgICAgYXhpb3MuZGVsZXRlKCIvZWJvb2svZGVsZXRlLyIgKyBpZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsgLy8gZGF0YSA9IGNvbW1vblJlc3AKICAgICAgICAgICAgICAgIGlmIChkYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAvLyDph43mlrDliqDovb3liJfooagKICAgICAgICAgICAgICAgICAgICBoYW5kbGVRdWVyeSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IHBhZ2luYXRpb24udmFsdWUuY3VycmVudCwKICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogcGFnaW5hdGlvbi52YWx1ZS5wYWdlU2l6ZSwKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UuZXJyb3IoZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICB2YXIgbGV2ZWwxID0gcmVmKCk7CiAgICAgICAgdmFyIGNhdGVnb3J5czsKICAgICAgICAvKioKICAgICAgICAgKiDmn6Xor6LmiYDmnInliIbnsbsKICAgICAgICAgKiovCiAgICAgICAgdmFyIGhhbmRsZVF1ZXJ5Q2F0ZWdvcnkgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxvYWRpbmcudmFsdWUgPSB0cnVlOwogICAgICAgICAgICBheGlvcy5nZXQoIi9jYXRlZ29yeS9hbGwiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgaWYgKGRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5cyA9IGRhdGEuY29udGVudDsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5Y6f5aeL5pWw57uE77yaIiwgY2F0ZWdvcnlzKTsKICAgICAgICAgICAgICAgICAgICBsZXZlbDEudmFsdWUgPSBbXTsKICAgICAgICAgICAgICAgICAgICBsZXZlbDEudmFsdWUgPSBUb29sLmFycmF5MlRyZWUoY2F0ZWdvcnlzLCAwKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi5qCR5b2i57uT5p6E77yaIiwgbGV2ZWwxLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAvLyDliqDovb3lrozliIbnsbvlkI7vvIzlho3liqDovb3nlLXlrZDkuabvvIzlkKbliJnlpoLmnpzliIbnsbvmoJHliqDovb3lvojmhaLvvIzliJnnlLXlrZDkuabmuLLmn5PkvJrmiqXplJkKICAgICAgICAgICAgICAgICAgICBoYW5kbGVRdWVyeSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IHBhZ2luYXRpb24udmFsdWUucGFnZVNpemUsCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmVycm9yKGRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgdmFyIGdldENhdGVnb3J5TmFtZSA9IGZ1bmN0aW9uIChjaWQpIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY2lkKQogICAgICAgICAgICB2YXIgcmVzdWx0ID0gIiI7CiAgICAgICAgICAgIGNhdGVnb3J5cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA9PT0gY2lkKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGl0ZW0ubmFtZTsgLy8g5rOo5oSP77yM6L+Z6YeM55u05o6lcmV0dXJu5LiN6LW35L2c55SoCiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gaXRlbS5uYW1lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9OwogICAgICAgIG9uTW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGhhbmRsZVF1ZXJ5Q2F0ZWdvcnkoKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBwYXJhbTogcGFyYW0sCiAgICAgICAgICAgIGVib29rczogZWJvb2tzLAogICAgICAgICAgICBwYWdpbmF0aW9uOiBwYWdpbmF0aW9uLAogICAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLAogICAgICAgICAgICBsb2FkaW5nOiBsb2FkaW5nLAogICAgICAgICAgICBoYW5kbGVUYWJsZUNoYW5nZTogaGFuZGxlVGFibGVDaGFuZ2UsCiAgICAgICAgICAgIGhhbmRsZVF1ZXJ5OiBoYW5kbGVRdWVyeSwKICAgICAgICAgICAgZ2V0Q2F0ZWdvcnlOYW1lOiBnZXRDYXRlZ29yeU5hbWUsCiAgICAgICAgICAgIGVkaXQ6IGVkaXQsCiAgICAgICAgICAgIGFkZDogYWRkLAogICAgICAgICAgICBlYm9vazogZWJvb2ssCiAgICAgICAgICAgIG1vZGFsVmlzaWJsZTogbW9kYWxWaXNpYmxlLAogICAgICAgICAgICBtb2RhbExvYWRpbmc6IG1vZGFsTG9hZGluZywKICAgICAgICAgICAgaGFuZGxlTW9kYWxPazogaGFuZGxlTW9kYWxPaywKICAgICAgICAgICAgY2F0ZWdvcnlJZHM6IGNhdGVnb3J5SWRzLAogICAgICAgICAgICBsZXZlbDE6IGxldmVsMSwKICAgICAgICAgICAgaGFuZGxlRGVsZXRlOiBoYW5kbGVEZWxldGUKICAgICAgICB9OwogICAgfQp9KTsK"},{"version":3,"file":"/Users/gongmiaolei/Downloads/jiawawiki/web/src/views/admin/admin-ebook.vue.ts","sourceRoot":"","sources":["/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/gongmiaolei/Downloads/jiawawiki/web/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/gongmiaolei/Downloads/jiawawiki/web/src/views/admin/admin-ebook.vue?vue&type=script&lang=ts"],"names":[],"mappings":"AACE,OAAO,EAAE,eAAe,EAAE,SAAS,EAAE,GAAG,EAAE,MAAM,KAAK,CAAC;AACtD,OAAO,KAAK,MAAM,OAAO,CAAC;AAC1B,OAAO,EAAE,OAAO,EAAE,MAAM,gBAAgB,CAAC;AACzC,OAAO,EAAC,IAAI,EAAC,MAAM,aAAa,CAAC;AAEjC,eAAe,eAAe,CAAC;IAC7B,IAAI,EAAE,YAAY;IAClB,KAAK,EAAL;QACE,IAAM,KAAK,GAAG,GAAG,EAAE,CAAC;QACpB,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;QACjB,IAAM,MAAM,GAAG,GAAG,EAAE,CAAC;QACrB,IAAM,UAAU,GAAG,GAAG,CAAC;YACrB,OAAO,EAAE,CAAC;YACV,QAAQ,EAAE,EAAE;YACZ,KAAK,EAAE,CAAC;SACT,CAAC,CAAC;QACH,IAAM,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;QAE3B,IAAM,OAAO,GAAG;YACd;gBACE,KAAK,EAAE,IAAI;gBACX,SAAS,EAAE,OAAO;gBAClB,KAAK,EAAE,EAAE,YAAY,EAAE,OAAO,EAAE;aACjC;YACD;gBACE,KAAK,EAAE,IAAI;gBACX,SAAS,EAAE,MAAM;aAClB;YACD;gBACE,KAAK,EAAE,IAAI;gBACX,KAAK,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE;aACpC;YACD;gBACE,KAAK,EAAE,KAAK;gBACZ,SAAS,EAAE,UAAU;aACtB;YACD;gBACE,KAAK,EAAE,KAAK;gBACZ,SAAS,EAAE,WAAW;aACvB;YACD;gBACE,KAAK,EAAE,KAAK;gBACZ,SAAS,EAAE,WAAW;aACvB;YACD;gBACE,KAAK,EAAE,QAAQ;gBACf,GAAG,EAAE,QAAQ;gBACb,KAAK,EAAE,EAAE,YAAY,EAAE,QAAQ,EAAE;aAClC;SACF,CAAC;QAEF;;YAEI;QACJ,IAAM,WAAW,GAAG,UAAC,MAAW;YAC9B,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;YACrB,6CAA6C;YAC7C,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;YAClB,KAAK,CAAC,GAAG,CAAC,aAAa,EAAE;gBACvB,MAAM,EAAE;oBACN,IAAI,EAAE,MAAM,CAAC,IAAI;oBACjB,IAAI,EAAE,MAAM,CAAC,IAAI;oBACjB,IAAI,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI;iBACvB;aACF,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;gBACf,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;gBACtB,IAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;gBAC3B,IAAI,IAAI,CAAC,OAAO,EAAE;oBAChB,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;oBAEjC,SAAS;oBACT,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC;oBACvC,UAAU,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;iBAC7C;qBAAM;oBACL,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC7B;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAEF;;WAEG;QACH,IAAM,iBAAiB,GAAG,UAAC,UAAe;YACxC,OAAO,CAAC,GAAG,CAAC,eAAe,GAAG,UAAU,CAAC,CAAC;YAC1C,WAAW,CAAC;gBACV,IAAI,EAAE,UAAU,CAAC,OAAO;gBACxB,IAAI,EAAE,UAAU,CAAC,QAAQ;aAC1B,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,wBAAwB;QACxB;;WAEG;QACH,IAAM,WAAW,GAAG,GAAG,EAAE,CAAC;QAC1B,IAAM,KAAK,GAAG,GAAG,EAAE,CAAC;QACpB,IAAM,YAAY,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;QAChC,IAAM,YAAY,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;QAChC,IAAM,aAAa,GAAG;YACpB,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC;YAC1B,KAAK,CAAC,KAAK,CAAC,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC/C,KAAK,CAAC,KAAK,CAAC,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAC/C,KAAK,CAAC,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;gBACnD,YAAY,CAAC,KAAK,GAAG,KAAK,CAAC;gBAC3B,IAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,oBAAoB;gBAChD,IAAI,IAAI,CAAC,OAAO,EAAE;oBAChB,YAAY,CAAC,KAAK,GAAG,KAAK,CAAC;oBAE3B,SAAS;oBACT,WAAW,CAAC;wBACV,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,OAAO;wBAC9B,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,QAAQ;qBAChC,CAAC,CAAC;iBACJ;qBAAM;oBACL,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC7B;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAEF;;WAEG;QACH,IAAM,IAAI,GAAG,UAAC,MAAW;YACvB,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC;YAC1B,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAChC,WAAW,CAAC,KAAK,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC,KAAK,CAAC,WAAW,CAAC,CAAA;QACxE,CAAC,CAAC;QAEF;;WAEG;QACH,IAAM,GAAG,GAAG;YACV,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC;YAC1B,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC;QACnB,CAAC,CAAC;QAEF,IAAM,YAAY,GAAG,UAAC,EAAU;YAC9B,KAAK,CAAC,MAAM,CAAC,gBAAgB,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;gBAChD,IAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,oBAAoB;gBAChD,IAAI,IAAI,CAAC,OAAO,EAAE;oBAChB,SAAS;oBACT,WAAW,CAAC;wBACV,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,OAAO;wBAC9B,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,QAAQ;qBAChC,CAAC,CAAC;iBACJ;qBAAM;oBACL,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC7B;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,IAAM,MAAM,GAAI,GAAG,EAAE,CAAC;QACtB,IAAI,SAAc,CAAC;QACnB;;YAEI;QACJ,IAAM,mBAAmB,GAAG;YAC1B,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;YACrB,KAAK,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;gBACvC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;gBACtB,IAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;gBAC3B,IAAI,IAAI,CAAC,OAAO,EAAE;oBAChB,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC;oBACzB,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;oBAEhC,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC;oBAClB,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;oBAC7C,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;oBAEnC,sCAAsC;oBACtC,WAAW,CAAC;wBACV,IAAI,EAAE,CAAC;wBACP,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,QAAQ;qBAChC,CAAC,CAAC;iBACJ;qBAAM;oBACL,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBAC7B;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,IAAM,eAAe,GAAG,UAAC,GAAW;YAClC,mBAAmB;YACnB,IAAI,MAAM,GAAG,EAAE,CAAC;YAChB,SAAS,CAAC,OAAO,CAAC,UAAC,IAAS;gBAC1B,IAAI,IAAI,CAAC,EAAE,KAAK,GAAG,EAAE;oBACnB,yCAAyC;oBACzC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;iBACpB;YACH,CAAC,CAAC,CAAC;YACH,OAAO,MAAM,CAAC;QAChB,CAAC,CAAC;QAEF,SAAS,CAAC;YACR,mBAAmB,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;QAEH,OAAO;YACL,KAAK,OAAA;YACL,MAAM,QAAA;YACN,UAAU,YAAA;YACV,OAAO,SAAA;YACP,OAAO,SAAA;YACP,iBAAiB,mBAAA;YACjB,WAAW,aAAA;YACX,eAAe,iBAAA;YAEf,IAAI,MAAA;YACJ,GAAG,KAAA;YAEH,KAAK,OAAA;YACL,YAAY,cAAA;YACZ,YAAY,cAAA;YACZ,aAAa,eAAA;YACb,WAAW,aAAA;YACX,MAAM,QAAA;YAEN,YAAY,cAAA;SACb,CAAA;IACH,CAAC;CACF,CAAC,CAAC","sourcesContent":["\n  import { defineComponent, onMounted, ref } from 'vue';\n  import axios from 'axios';\n  import { message } from 'ant-design-vue';\n  import {Tool} from \"@/util/tool\";\n\n  export default defineComponent({\n    name: 'AdminEbook',\n    setup() {\n      const param = ref();\n      param.value = {};\n      const ebooks = ref();\n      const pagination = ref({\n        current: 1,\n        pageSize: 10,\n        total: 0\n      });\n      const loading = ref(false);\n\n      const columns = [\n        {\n          title: '封面',\n          dataIndex: 'cover',\n          slots: { customRender: 'cover' }\n        },\n        {\n          title: '名称',\n          dataIndex: 'name'\n        },\n        {\n          title: '分类',\n          slots: { customRender: 'category' }\n        },\n        {\n          title: '文档数',\n          dataIndex: 'docCount'\n        },\n        {\n          title: '阅读数',\n          dataIndex: 'viewCount'\n        },\n        {\n          title: '点赞数',\n          dataIndex: 'voteCount'\n        },\n        {\n          title: 'Action',\n          key: 'action',\n          slots: { customRender: 'action' }\n        }\n      ];\n\n      /**\n       * 数据查询\n       **/\n      const handleQuery = (params: any) => {\n        loading.value = true;\n        // 如果不清空现有数据，则编辑保存重新加载数据后，再点编辑，则列表显示的还是编辑前的数据\n        ebooks.value = [];\n        axios.get(\"/ebook/list\", {\n          params: {\n            page: params.page,\n            size: params.size,\n            name: param.value.name\n          }\n        }).then((response) => {\n          loading.value = false;\n          const data = response.data;\n          if (data.success) {\n            ebooks.value = data.content.list;\n\n            // 重置分页按钮\n            pagination.value.current = params.page;\n            pagination.value.total = data.content.total;\n          } else {\n            message.error(data.message);\n          }\n        });\n      };\n\n      /**\n       * 表格点击页码时触发\n       */\n      const handleTableChange = (pagination: any) => {\n        console.log(\"看看自带的分页参数都有啥：\" + pagination);\n        handleQuery({\n          page: pagination.current,\n          size: pagination.pageSize\n        });\n      };\n\n      // -------- 表单 ---------\n      /**\n       * 数组，[100, 101]对应：前端开发 / Vue\n       */\n      const categoryIds = ref();\n      const ebook = ref();\n      const modalVisible = ref(false);\n      const modalLoading = ref(false);\n      const handleModalOk = () => {\n        modalLoading.value = true;\n        ebook.value.category1Id = categoryIds.value[0];\n        ebook.value.category2Id = categoryIds.value[1];\n        axios.post(\"/ebook/save\", ebook.value).then((response) => {\n          modalLoading.value = false;\n          const data = response.data; // data = commonResp\n          if (data.success) {\n            modalVisible.value = false;\n\n            // 重新加载列表\n            handleQuery({\n              page: pagination.value.current,\n              size: pagination.value.pageSize,\n            });\n          } else {\n            message.error(data.message);\n          }\n        });\n      };\n\n      /**\n       * 编辑\n       */\n      const edit = (record: any) => {\n        modalVisible.value = true;\n        ebook.value = Tool.copy(record);\n        categoryIds.value = [ebook.value.category1Id, ebook.value.category2Id]\n      };\n\n      /**\n       * 新增\n       */\n      const add = () => {\n        modalVisible.value = true;\n        ebook.value = {};\n      };\n\n      const handleDelete = (id: number) => {\n        axios.delete(\"/ebook/delete/\" + id).then((response) => {\n          const data = response.data; // data = commonResp\n          if (data.success) {\n            // 重新加载列表\n            handleQuery({\n              page: pagination.value.current,\n              size: pagination.value.pageSize,\n            });\n          } else {\n            message.error(data.message);\n          }\n        });\n      };\n\n      const level1 =  ref();\n      let categorys: any;\n      /**\n       * 查询所有分类\n       **/\n      const handleQueryCategory = () => {\n        loading.value = true;\n        axios.get(\"/category/all\").then((response) => {\n          loading.value = false;\n          const data = response.data;\n          if (data.success) {\n            categorys = data.content;\n            console.log(\"原始数组：\", categorys);\n\n            level1.value = [];\n            level1.value = Tool.array2Tree(categorys, 0);\n            console.log(\"树形结构：\", level1.value);\n\n            // 加载完分类后，再加载电子书，否则如果分类树加载很慢，则电子书渲染会报错\n            handleQuery({\n              page: 1,\n              size: pagination.value.pageSize,\n            });\n          } else {\n            message.error(data.message);\n          }\n        });\n      };\n\n      const getCategoryName = (cid: number) => {\n        // console.log(cid)\n        let result = \"\";\n        categorys.forEach((item: any) => {\n          if (item.id === cid) {\n            // return item.name; // 注意，这里直接return不起作用\n            result = item.name;\n          }\n        });\n        return result;\n      };\n\n      onMounted(() => {\n        handleQueryCategory();\n      });\n\n      return {\n        param,\n        ebooks,\n        pagination,\n        columns,\n        loading,\n        handleTableChange,\n        handleQuery,\n        getCategoryName,\n\n        edit,\n        add,\n\n        ebook,\n        modalVisible,\n        modalLoading,\n        handleModalOk,\n        categoryIds,\n        level1,\n\n        handleDelete\n      }\n    }\n  });\n"]}]}